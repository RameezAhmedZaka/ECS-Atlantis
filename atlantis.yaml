# version: 3

# projects:
#   - name: applications
#     dir: applications/*      
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true
#     # workflow: default
#     apply_requirements: [approved, mergeable]

#   - name: databases
#     dir: databases/*          
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true
#     # workflow: default
#     apply_requirements: [approved, mergeable]

# workflows:
#   default:
#     plan:
#       steps:
#         - init
#         - plan
#     apply:
#       steps:
#         - apply


# version: 3

# projects:
#   - name: applications
#     dir: applications/*      
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true

#   - name: databases
#     dir: databases/*          
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true

# workflows:
#   default:
#     plan:
#       steps:
#         - init
#         - plan
#     apply:
#       steps:
#         - apply

# version: 3
# projects:
#   - name: application
#     dir: application
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "modules/**/*.tf"]
#       enabled: true
# workflows:
#   default:
#     plan:
#       steps:
#         - init
#         - plan:
#             extra_args: ["-var-file=./config/dev.tfvars"]
#     apply:
#       steps:
#         - apply:
#             extra_args: ["-var-file=./config/dev.tfvars"]




  # - name: databases
  #   dir: databases/*
  #   autoplan:
  #     when_modified: ["databases/**/*.tf", "databases/**/config/*.tfvars", "databases/**/env/**/*.conf"]
  #     enabled: true

version: 3
projects:
  - name: application
    dir: application                     # root of your Terraform project
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"                        # root module files
        - "config/*.tfvars"             # variable files
        - "modules/**/*.tf"             # all modules
    workflow: default
    apply_requirements: []               # no PR approval needed
    import_requirements: []              # anyone can run import
    vars:
      - var_file: ./config/dev.tfvars      # tells Atlantis which tfvars to use

workflows:
  default:
    plan:
      steps:
        - init
        - plan
    apply:
      steps:
        - apply