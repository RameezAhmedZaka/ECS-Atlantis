# version: 3

# projects:
#   - name: applications
#     dir: applications/*      
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true
#     # workflow: default
#     apply_requirements: [approved, mergeable]

#   - name: databases
#     dir: databases/*          
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true
#     # workflow: default
#     apply_requirements: [approved, mergeable]

# workflows:
#   default:
#     plan:
#       steps:
#         - init
#         - plan
#     apply:
#       steps:
#         - apply


# version: 3

# projects:
#   - name: applications
#     dir: applications/*      
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true

#   - name: databases
#     dir: databases/*          
#     autoplan:
#       when_modified: ["*.tf", "config/*.tfvars", "env/**/*.conf"]
#       enabled: true

# workflows:
#   default:
#     plan:
#       steps:
#         - init
#         - plan
#     apply:
#       steps:
#         - apply

version: 3
projects:
  - name: application
    dir: application
    workflow: custom-run

    autoplan:
      when_modified: ["*.tf", "config/*.tfvars", "modules/**/*.tf"]
      enabled: true
    apply_requirements: [] 
    destroy_requirements: []
workflows:
  custom-run:
    plan:
      steps:
        - run:
            command: ls
        - init
        - plan:
            extra_args: ["-var-file=./config/dev.tfvars"]
    apply:
      steps:
        - apply:
            extra_args: ["-var-file=./config/dev.tfvars"]





  # - name: databases
  #   dir: databases/*
  #   autoplan:
  #     when_modified: ["databases/**/*.tf", "databases/**/config/*.tfvars", "databases/**/env/**/*.conf"]
  #     enabled: true