---
version: 3
automerge: true
parallel_plan: true
parallel_apply: false
projects:
  - name: app11-helia
    dir: ./app11
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./app11/*.tf"
        - "./app11/config/*.tfvars"
        - "./app11/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  app11-helia:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./app11/env/helia/helia.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./app11/config/helia.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: app11-production
    dir: ./app11
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./app11/*.tf"
        - "./app11/config/*.tfvars"
        - "./app11/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  app11-production:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./app11/env/production/prod.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./app11/config/production.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: app11-staging
    dir: ./app11
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./app11/*.tf"
        - "./app11/config/*.tfvars"
        - "./app11/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  app11-staging:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./app11/env/staging/stage.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./app11/config/stage.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: db-db71-staging
    dir: ./db/db71
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./db/db71/*.tf"
        - "./db/db71/config/*.tfvars"
        - "./db/db71/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  db-db71-staging:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./db/db71/env/staging/stage.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./db/db71/config/stage.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: db-db1-production
    dir: ./db/db1
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./db/db1/*.tf"
        - "./db/db1/config/*.tfvars"
        - "./db/db1/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  db-db1-production:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./db/db1/env/production/prod.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./db/db1/config/production.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: application-rdot-helia
    dir: ./application/rdot
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./application/rdot/*.tf"
        - "./application/rdot/config/*.tfvars"
        - "./application/rdot/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  application-rdot-helia:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./application/rdot/env/helia/helia.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./application/rdot/config/helia.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: application-rdot-production
    dir: ./application/rdot
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./application/rdot/*.tf"
        - "./application/rdot/config/*.tfvars"
        - "./application/rdot/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  application-rdot-production:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./application/rdot/env/production/prod.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./application/rdot/config/production.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: application-rdot-rameez
    dir: ./application/rdot
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./application/rdot/*.tf"
        - "./application/rdot/config/*.tfvars"
        - "./application/rdot/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  application-rdot-rameez:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./application/rdot/env/rameez/rame.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./application/rdot/config/rameez.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
  - name: application-rdot-staging
    dir: ./application/rdot
    autoplan:
      enabled: true
      when_modified:
        - "*.tf"
        - "./application/rdot/*.tf"
        - "./application/rdot/config/*.tfvars"
        - "./application/rdot/env/*/*"
    terraform_version: v1.6.6
    apply_requirements:
      - approved
      - mergeable
workflows:
  application-rdot-staging:
    plan:
      steps:
        - run: rm -rf .terraform .terraform.lock.hcl
        - init:
            extra_args:
              - -backend-config=./application/rdot/env/staging/stage.conf
              - -reconfigure
        - plan:
            extra_args:
              - -var-file=./application/rdot/config/stage.tfvars
              - -lock-timeout=10m
            extra_args: []
    apply:
      steps:
        - apply:
            extra_args:
              - -auto-approve
