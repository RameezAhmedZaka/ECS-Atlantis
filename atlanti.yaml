  - name: adot-dev-deploy
    dir: application/adot
    workspace: development
    workflow: dev-workflow
    apply_requirements: []
    autoplan:
      when_modified: ["*.tf", "config/*.tfvars", "modules/**/*.tf", "**/*.tf"]
      enabled: true
    plan_extra_args:
      - "-backend-config=/adot/env/staging/stage.conf"
      - "-var-file=/adot/config/stage.tfvars"

  - name: adot-prod-deploy
    dir: application/adot
    workspace: production
    workflow: prod-workflow
    apply_requirements: []
    autoplan:
      when_modified: ["*.tf", "config/*.tfvars", "modules/**/*.tf", "**/*.tf"]
      enabled: true
    plan_extra_args:
      - "-backend-config=/adot/env/production/prod.conf"
      - "-var-file=/adot/config/production.tfvars"

  - name: apollo-dev-deploy
    dir: application/apollo
    workspace: development
    workflow: dev-workflow
    apply_requirements: []
    autoplan:
      when_modified: ["*.tf", "config/*.tfvars", "modules/**/*.tf", "**/*.tf"]
      enabled: true
    plan_extra_args:
      - "-backend-config=/apollo/env/staging/stage.conf"
      - "-var-file=/apollo/config/stage.tfvars"

  - name: apollo-prod-deploy
    dir: application/apollo
    workspace: production
    workflow: prod-workflow
    apply_requirements: []
    autoplan:
      when_modified: ["*.tf", "config/*.tfvars", "modules/**/*.tf", "**/*.tf"]
      enabled: true
    plan_extra_args:
      - "-backend-config=/apollo/env/production/prod.conf"
      - "-var-file=/apollo/config/production.tfvars"


workflows:
  dev-workflow:
    plan:
      steps:
        - run:
            command: ls
        - init: {}
        - plan: {}
    apply:
      steps:
        - apply: {}

  prod-workflow:
    plan:
      steps:
        - run:
            command: ls
        - init: {}
        - plan: {}
    apply:
      steps:
        - apply: {}
